angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,r){function t(e,r){if(angular.isArray(e))for(var t=0;t<e.length;t++)if(angular.equals(e[t],r))return!0;return!1}function a(e,r){e=angular.isArray(e)?e:[];for(var t=0;t<e.length;t++)if(angular.equals(e[t],r))return e;return e.push(r),e}function c(e,r){if(angular.isArray(e))for(var t=0;t<e.length;t++)if(angular.equals(e[t],r)){e.splice(t,1);break}return e}function n(n,i,l){r(i)(n);var u=e(l.checklistModel),o=u.assign,h=e(l.checklistValue)(n.$parent);n.$watch("checked",function(e,r){if(e!==r){var t=u(n.$parent);e===!0?o(n.$parent,a(t,h)):o(n.$parent,c(t,h))}}),n.$parent.$watch(l.checklistModel,function(e){n.checked=t(e,h)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,r){if("INPUT"!==e[0].tagName||!e.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!r.checklistValue)throw"You should provide `checklist-value`.";return e.removeAttr("checklist-model"),e.attr("ng-model","checked"),n}}}]);